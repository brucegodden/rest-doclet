allprojects {
  apply plugin: 'java'
  apply plugin: 'maven'

  sourceCompatibility = 1.6
  targetCompatibility = 1.6

  group = 'org.cloudifysource'
  version = '0.5.30'

  task sourceJar(type: Jar) {
    classifier = 'sources'
    from sourceSets.main.allSource
  }

  task createPom << {
    pom {}.writeTo("$buildDir/libs/pom.xml")
  }

  artifacts {
    archives sourceJar
  }

  assemble {
    dependsOn sourceJar
    dependsOn createPom
  }
}

repositories {
  mavenCentral()
}

dependencies {
  ext {
    jackson_version = '1.9.13'
    spring_version = '4.0.1.RELEASE'
  }

  compile 'cglib:cglib-nodep:2.2'
  compile 'com.fasterxml.jackson.core:jackson-annotations:2.4.3'
  compile 'com.google.code.findbugs:jsr305:3.0.0'
  compile 'com.google.guava:guava:15.0'
  compile 'commons-lang:commons-lang:2.6'
  compile 'org.apache.velocity:velocity:1.7'
  compile 'org.objenesis:objenesis:1.3'
  compile "org.codehaus.jackson:jackson-core-asl:$jackson_version"
  compile "org.codehaus.jackson:jackson-mapper-asl:$jackson_version"
  compile "org.springframework:spring-context:$spring_version"
  compile "org.springframework:spring-webmvc:$spring_version"
  compile 'javax.servlet:javax.servlet-api:3.0.1'

  compile files("${System.properties['java.home']}/../lib/tools.jar")
  //eww replicated from the original pom. The maven javadoc jars currently 404

  compile project(':annotations')

  testCompile 'junit:junit:4.11'
  testCompile 'org.hamcrest:hamcrest-all:1.3'
  testCompile 'org.mockito:mockito-core:1.9.5'
}

project(':annotations') {
  buildDir = "$rootProject.buildDir/$name"
}
